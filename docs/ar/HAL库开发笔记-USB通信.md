# ููุงุญุธุงุช ุชุทููุฑ ููุชุจุฉ HAL - ุงูุงุชุตุงู ุจูุงุณุทุฉ USB ๐ง

ูุณุชูุฏ ูุฐุง ุงูููุงู ุฅูู ูุฌููุนุฉ ุชุทููุฑ RobotCtrl ุงูุฎุงุตุฉ ุจูุง ุ ููุชู ุชุดุบูู ููุงุฉ ุงููููุฑูููุชุฑููุฑ ุจูุงุณุทุฉ STM32F407ZET6 ุ ููุชู ุชูุตูู ุฏุจูุณ USB_Slave ุจู `PA11` ู `PA12` ุ ูุฑุฌู ุงูุฑุฌูุน ุฅูู ุงููุฎุทุท ุงูุฃุณุงุณู ูุงูููุฏูุฉ ุงูููุตูุฉ ูู [**RobotCtrl - STM32 ้็จๅผๅๅฅไปถ**](https://wiki-power.com/ar/RobotCtrl-STM32%E9%80%9A%E7%94%A8%E5%BC%80%E5%8F%91%E5%A5%97%E4%BB%B6) .

## ุฎุทูุงุช ุจุณูุทุฉ ููุงุฎุชุจุงุฑ ุงูุฏุงุฆุฑู

### ุงูุชูููู ุงูุฏุงุฎูู ูู CubeMX

1. ุชูููู ุงููุคูุช ุงูุฎุงุฑุฌู (HSE).
2. ุชูููู ุดุฌุฑุฉ ุงูุณุงุนุฉ ุ ูุชุฃูุฏ ูู ุฃู ููุงูุฉ ุดุฌุฑุฉ ุงูุณุงุนุฉ "48MHz Clocks (MHz)" ูู 48 ููุฌุงูุฑุชุฒ.
3. ูู ุตูุญุฉ `USB_OTG_FS` ุ ูู ุจุชูููู `Mode` ูู `Device_Only` ุ ูุงูุฏุจุงุจูุณ ุงูุงูุชุฑุงุถูุฉ ูู `PA11` ู `PA12`.
4. ูู ุตูุญุฉ `USB_DEVICE` ุ ูู ุจุชูููู `Class For FS IP` ูู `Commmunication Device Class (Virtual Port Com)`.

### ุงูุชูููู ุงูุฏุงุฎูู ููููุฏ

ูุชูููุฐ ูุธููุฉ ุงูุฏุงุฆุฑุฉ ุงูุฑุงุฌุนุฉ ููุจูุงูุงุช ุ ูุง ุนููู ุณูู ุฅุถุงูุฉ ุณุทุฑ ูุงุญุฏ ูู ุฏุงูุฉ `CDC_Receive_FS` ูู ููู `usbd_cdc_if.c`:

```c title="usbd_cdc_if.c"
CDC_Transmit_FS(Buf,*Len); // ุฅุฑุฌุงุน ููุณ ุงูุจูุงูุงุช
```

### ุงูุงุฎุชุจุงุฑ

ุงูุชุญ ูุฏูุฑ ุงูุฃุฌูุฒุฉ ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูุฏ ุชู ุนุฑุถู ุ ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฌูุงุฒ ุฃู ูุงู ููุงู ุนูุงูุฉ ุชุนุฌุจ ุตูุฑุงุก ุ ูุฑุฌู ุชูุฒูู ุจุฑูุงูุฌ ุงูุชุดุบูู ูู ูููุน ST [**STM32 Virtual COM Port Driver**](https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-stm32102.html) .

ุฅุฐุง ูู ูุชู ุงูุชุนุฑู ุนูู ุงูุฌูุงุฒ ุจุดูู ุตุญูุญ ุจุนุฏ ุชุซุจูุช ุงูุชุนุฑููุงุช ุ ูููููู ูุญุงููุฉ ุฒูุงุฑุฉ CubeMX - `Project Manager` - `Project` - `Linker Settings` ุ ูุชุนุฏูู `Minimum Heap Size` ุฅูู `0x600` ุฃู ุฃุนูู.

ุงูุชุญ ุฃุฏุงุฉ ุงููููุฐ ุงูุชุณูุณูู (ุฃู ูุนุฏู ุจุช ูุนูู) ุ ูุณูู ุชูุงุญุธ ุฃูู ุนูุฏ ุฅุฑุณุงู ุฃู ุญุฑู ุ ุณูุชู ุฅุฑุฌุงุน ููุณ ุงูุญุฑู.

## ุงููุฑุงุฌุน ูุงูุดูุฑ

- [ุงุณุชุฎุฏุงู STM32 CubeMX HAL ูุฅูุดุงุก ูุดุฑูุน USBVCP Virtual Serial Port ุจุณุฑุนุฉ](https://blog.csdn.net/yxy244/article/details/102620249)

> ุนููุงู ุงููุต: <https://wiki-power.com/>  
> ูุชู ุญูุงูุฉ ูุฐุง ุงูููุงู ุจููุฌุจ ุงุชูุงููุฉ [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)ุ ููุฑุฌู ุฐูุฑ ุงููุตุฏุฑ ุนูุฏ ุฅุนุงุฏุฉ ุงููุดุฑ.

> ุชูุช ุชุฑุฌูุฉ ูุฐู ุงููุดุงุฑูุฉ ุจุงุณุชุฎุฏุงู ChatGPTุ ูุฑุฌู [**ุชุฒููุฏูุง ุจุชุนูููุงุชูู**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) ุฅุฐุง ูุงูุช ููุงู ุฃู ุญุฐู ุฃู ุฅููุงู.