# تصميم محرك العاصمة ذو الفرشاة بتشغيل محرك H-Bridge

عادةً ما نستخدم تحكم PWM في دائرة H-Bridge لتحقيق التحكم في اتجاه وسرعة دوران محرك العاصمة ذو الفرشاة، ويتناسب نسبيًا نسبة العرض إلى الفترة لـ PWM مع سرعة دوران المحرك.

## المعرفة الأساسية لـ H-Bridge

H-Bridge هو دائرة كهربائية جسرية يمكنها تبديل سريع لقطبية الجهد على الحمل. تستخدم هذه الدائرة عادةً لتشغيل محرك العاصمة ذو الفرشاة لتدور في اتجاه عقارب الساعة أو عكس اتجاه عقارب الساعة. ونظرًا لأن بنيتها تشبه الحرف "H"، فإنها تسمى دائرة H-Bridge.

تتكون دائرة H-Bridge من أربعة مفاتيح، حيث تتكون S1 و S3 من مفاتيح الجهد العالي (High-Side Switch) في H-Bridge، وعادةً ما تكون عبارة عن MOSFET من النوع P أو ترانزستور من النوع PNP، وتتكون S2 و S4 من مفاتيح الجهد المنخفض (Low-Side Switch) في H-Bridge، وعادةً ما تكون عبارة عن MOSFET من النوع N أو ترانزستور من النوع NPN.

![](https://img.wiki-power.com/d/wiki-media/img/20210812093751.png)

- عند إغلاق المفاتيح S1 و S4 وفتح S2 و S3، يدور المحرك بشكل طبيعي ويتم تسجيله كاتجاه إيجابي.
- عند إغلاق المفاتيح S2 و S3 وفتح S1 و S4، يدور المحرك باتجاه عكس عقارب الساعة ويتم تسجيله كاتجاه سلبي.
- عند إغلاق المفاتيح S1 و S2، أو S3 و S4، يتم توصيل الطاقة مع خطر حدوث تلف في مصدر الطاقة، ويجب تجنب هذا النوع من الحالات. وتسمى هذه الحالة بـ "التسرب الكهربائي" (shoot-through).
- عند إغلاق المفاتيح S1 و S3 وفتح S2 و S4، أو إغلاق المفاتيح S2 و S4 وفتح S1 و S3، لا يدور المحرك. ويكون المحرك في حالة "الفرملة"، حيث يتم توجيه الجهد الكهربائي الذي يتم إنتاجه بسبب الحركة الخمولية للمحرك إلى مسار قصير، مما يؤدي إلى تكوين مقاومة للحركة العكسية وتكوين "الفرملة".
- عند فتح جميع المفاتيح S1 و S2 و S3 و S4، يكون المحرك في حالة الانزلاق ويستمر في الدوران لفترة طويلة.

في الدائرة الكهربائية الفعلية، يمكننا استخدام رقاقة تشغيل للتحكم الدقيق في 4 مفاتيح MOS.

## اختيار بناء العناصر المنفصلة أو رقاقة متكاملة

بالمقارنة مع استخدام رقاقة تشغيل متكاملة، يكون تكلفة بناء الدائرة باستخدام العناصر المنفصلة أقل ولها مزيد من التخصيص. عادةً ما يتم تحريك المحرك من MCU بإخراج إشارة PWM، ومن خلال العزل الضوئي والدائرة المنطقية، يتم الوصول إلى رقاقة التشغيل، وأخيرًا إلى MOSFET في الجسر الكامل / النصف.

ومع ذلك، يجب مراعاة العديد من الأمور عند استخدام العناصر المنفصلة لتشغيل المحرك، مثل التحكم في المنطقة الميتة (لمنع التسرب الكهربائي) وتصميم دائرة حماية وغيرها، ويزداد تعقيد التصميم الكهربائي ويزداد حجم PCB وتزداد التكلفة ويزداد خطر التصميم.

عادةً ما نستخدم رقاقة تشغيل H-Bridge المتكاملة لتحريك محرك العاصمة ذو الفرشاة.

## اختيار MOSFET

في تشغيل المحرك، نستخدم عادةً MOSFET من النوع N المحسن. الأسباب كما يلي:

1. استخدام MOSFET المحسن: يمكن إغلاقه بالكامل عند الجهد المنخفض، وعندما يكون الجهد أعلى من جهد التشغيل $U_{GS(TH)}$، يمكن توصيله بالكامل.
2. استخدام MOSFET من النوع N: لأن اختيار نموذج P-MOS أقل والسعر أعلى والمقاومة الكهربائية أكبر، مما يؤدي إلى ارتفاع درجة الحرارة وانخفاض الكفاءة.
3. استخدام MOSFET: يتميز MOSFET بخسارة طاقة أقل وحجم أصغر وتيار تشغيل أكبر واستجابة أسرع ومقاومة توصيل أقل بالمقارنة مع BJT.

في التصميم الفعلي، ولتبسيط المواد، نستخدم عادةً MOSFET من النوع N بالكامل. ومع ذلك، لأن MOSFET من النوع N لا يمكن استخدامه مباشرة للتحكم في الجهد العالي في H-Bridge (لأن شرط التوصيل لـ N-MOS هو $V_g-V_s>V_{gs(th)}$)، فإنه يجب تصميم دائرة تشغيل عالية الجهد لتشغيل المفتاح العلوي. لمزيد من التفاصيل حول دائرة التشغيل الذاتي، يرجى الانتقال إلى المقالة [**تصميم الطاقة - دائرة التشغيل الذاتي**](https://wiki-power.com/ar/%D8%AA%D8%B5%D9%85%D9%8A%D9%85-%D8%A7%D9%84%D8%B7%D8%A7%D9%82%D8%A9---%D8%AF%D8%A7%D8%A6%D8%B1%D8%A9-%D8%A7%D9%84%D8%AA%D8%B4%D8%BA%D9%8A%D9%84-%D8%A7%D9%84%D8%B0%D8%A7%D8%AA%D9%8A%D8%A9).

المعلمات التي يجب مراعاتها عند اختيار MOSFET من النوع N:

- $V_{DSS}$
- $R_{DS(on)}$

## رقاقة تشغيل H-Bridge المتكاملة

عادةً ما تضم رقاقة تشغيل H-Bridge الحماية الكهربائية التالية:

- حماية الجهد الزائد (OVP)
- قفل الجهد القليل (UVLO)
- حماية الحمل الزائد (OCP)
- حماية إيقاف التشغيل الحراري (TSD)
- حماية التسرب الكهربائي (STP)
- حماية التفريغ الكهروستاتيكي (ESD)

عادةً ما نستخدم شرائح تشغيل البوابة لتوفير مصدر طاقة لبوابة N-MOS عالية الجهد / منخفضة الجهد (يجب أن يكون أعلى من $U_{GS(TH)}$ للموسفيت بين الصرف D والمصدر S لتمرير التيار). على سبيل المثال ، تشتمل معلومات تشغيل بوابة DRV8701 على الشكل التالي:

![](https://img.wiki-power.com/d/wiki-media/img/20210811095012.png)

بالاشتراك مع IRFH8330 ، يمكن تشغيل هذا الموسفيت:

![](https://img.wiki-power.com/d/wiki-media/img/20210811095429.png)

## اختيار تردد PWM

عند استخدام إشارة PWM للتحكم في سرعة المحرك ، يجب مراعاة ترددها. إذا كان التردد منخفضًا جدًا ، فسيتسبب المحرك في إصدار ضوضاء عند السرعات المنخفضة ، وسيكون بطيئًا في الاستجابة لتغيير نسبة العرض إلى الفترة. وإذا كان تردد PWM عاليًا جدًا ، فسيتسبب في خسارة كبيرة في الطاقة على موسفيت H-bridge.

إذا لم يتم تحديد نطاق التردد المحدد في كتيب المواصفات لشريحة تشغيل H-bridge ، فعادةً ما يمكن التحكم في سرعة المحرك بشكل جيد باستخدام إشارات PWM بتردد حوالي 4 كيلو هرتز إلى 200 كيلو هرتز.

## إدخال وقت المنطقة الميتة وحماية التوصيل المتقاطع

يمكن تفسير المنطقة الميتة على أنها تأخير يجعل الجسر العلوي مفتوحًا بالكامل عند الانتقال إلى الخلف ، ويجب فتح الجسر السفلي عند الانتقال إلى الأمام. يمكن أن تؤدي منطقة الميتة الصغيرة إلى خطر ، في حين أن منطقة الميتة الكبيرة يمكن أن تؤدي إلى استجابة ضعيفة للمحرك وكفاءة استخدام الطاقة المنخفضة.

![](https://img.wiki-power.com/d/wiki-media/img/20210815112048.jpg)

استخدام حلول متكاملة: تضمن عملية المصافحة التلقائية استخدام أفضل وقت للمنطقة الميتة ، بدون تأثير معدل الدوران والجهد وخصائص MOS ودرجة الحرارة. يتكون عملية المصافحة من عدة خطوات لضمان استخدام أفضل وقت للمنطقة الميتة وعدم حدوث توصيل متقاطع. خطوات المصافحة هي:

1. استقبال الإشارة من MOS الجانب العالي إلى MOS الجانب المنخفض
2. تعطيل MOS الجانب العالي ومراقبة $V_{GS}$ لتحديد متى يتم تعطيله
3. إدخال منطقة الميتة وتمكين MOS الجانب المنخفض

## وضع تحلل H-bridge

وضع التحلل هو الدائرة التي يمر بها التيار لإيقاف المحرك. لأن المحرك العاصمي ينتمي إلى الحمل الحسي (لا يمكن لتيار اللفة الحثية أن يتغير بشكل مفاجئ) ، فإنه يتطلب دائمًا دائرة تحلل لتوقف المحرك ، بالإضافة إلى فصل التيار. وإلا فإن التيار الذي يتدفق في المحرك قد يتسبب في تلف MOSFET.

### التحلل الغير متزامن والتحلل المتزامن

يمكننا استخدام الثنائي لبناء دائرة تحلل ، كما هو موضح في الشكل:

![](https://img.wiki-power.com/d/wiki-media/img/20211222162216.png)

ونحن نعلم أن MOSFET لديه ثنائي جسم يمكن أن يعمل كدائرة تحلل ، وفي بعض التطبيقات ، يتم إضافة ثنائي شوتكي للتوصيل المتزامن ، لذلك يمكن استخدامه لتحقيق التحلل. يسمى وضع التحلل الذي يستخدم الثنائي بوضع التحلل غير المتزامن. ومع ذلك ، فإن خسارة وضع التحلل غير المتزامن نسبيًا كبيرة ($2 * I * V_D$) ، لذلك نقدم طريقة أخرى للتحلل ، وهي وضع التحلل المتزامن. يتم تحقيق التحلل المتزامن عن طريق فتح MOSFET لتحقيق التحلل. نظرًا لأن مقاومة التوصيل $R_{ds(on)}$ لـ MOSFET صغيرة ، فإن خسارة التحلل المتزامن نسبيًا صغيرة ($I^2 * R_{ds(on)*2}$) ، وسنركز هنا على التحلل المتزامن.

![](https://img.wiki-power.com/d/wiki-media/img/20211222172558.png)

### المعلمات الرئيسية

![](https://img.wiki-power.com/d/wiki-media/img/20211222172913.png)

- $I_{TRIP}$: التيار المحدد من قبل شريحة التشغيل الحالية ، تحت تحكم خوارزمية التشغيل.
- $T_{DRIVE}$: وقت المرحلة التشغيلية
- $T_{BLANK}$: وقت المنطقة الميتة ، لمنع الاختراق
- $T_{OFF}$: وقت التحلل

### ثلاثة أنماط للتحلل المتزامن

يوجد ثلاثة أنماط للتحلل المتزامن: التحلل السريع (Fast Decay) والتحلل البطيء (Slow Decay) والتحلل المختلط (Mixed Decay). يشير هذا المصطلح إلى سرعة تحلل التيار خلال فترة التحلل ، وليس سرعة دوران المحرك.

الفرق بين الأنماط الثلاثة:



|                        | الانحسار السريع | الانحسار البطيء | الانحسار المختلط |
| ---------------------- | ---------------- | ------------------ | ------------------ |
| تموج التيار الفازي    | كبير             | صغير              | متوسط              |
| وقت مرحلة التدفق $T_{OFF}$ | قصير (يمكن أن يؤدي إلى خسارة تبديل أكبر) | طويل (يمكن سماع الضوضاء على التردد المنخفض) | متوسط ​​(توازن التردد والأداء) |
| سرعة انخفاض التيار الفازي | سريع             | بطيء              | متوسط              |
| نطاق الاستخدام         | مناسب لمحركات الحث الكبير | مناسب لمحركات الحث الصغير | متوسط              |

#### الانحسار السريع

![](https://img.wiki-power.com/d/wiki-media/img/20211223154627.png)

يتم إغلاق موسفيتين من الدارة الكهربائية ، وبعد انتهاء فترة الوفاة ، يتم فتح موسفيتين متقابلين للسماح بتفريغ التيار بسرعة. خلال فترة الوفاة ، سيخضع H-bridge للانحسار غير المتزامن ، لكن الوقت قصير ويمكن تجاهله.

#### الانحسار البطيء

![](https://img.wiki-power.com/d/wiki-media/img/20211223160616.png)

يتم إغلاق موسفيتين من الدارة الكهربائية ، وبعد انتهاء فترة الوفاة ، يتم فتح موسفيتين سفليين للسماح بتفريغ التيار ببطء. بالمثل ، خلال فترة الوفاة ، سيخضع H-bridge للانحسار غير المتزامن ، لكن الوقت قصير ويمكن تجاهله.

#### الانحسار المختلط

يتم إغلاق موسفيتين من الدارة الكهربائية ، وبعد انتهاء فترة الوفاة ، يتم فتح موسفيتين متقابلين للسماح بتفريغ التيار بسرعة (الانحسار السريع) ، ثم يتم فتح موسفيتين سفليين للسماح بتفريغ التيار ببطء (الانحسار البطيء). في وضع الانحسار المختلط ، يتراوح تموج التيار الفازي بين الانحسار السريع والانحسار البطيء.

## مشاكل EMC ومعالجتها لتشغيل المحرك

نظرًا لأن المحرك العاصمي ينتمي إلى الحمل الحسي (لا يمكن أن يتغير تيار الحث الكهربائي بشكل مفاجئ) ، يمكن وضع سعة كبيرة (> 100 ميكروفاراد) على مصدر جهد المحرك (عادة ما يتم استخدام سعات كهربائية من الألومنيوم) لامتصاص التيار الذي يتم إنتاجه عند توقف المحرك العاصمي وتثبيته ، ولتثبيت مصدر جهد المحرك عند تبديل الاتجاه.

واحدة من المشاكل الأخرى هي أن الكهرباء الحثية الزائدة (الملف الحثي + المقاومة) بين مصدر جهد المحرك وخط الطاقة لوحة تشغيل المحرك تشكل فتحة LC مع السعة الحثية للوحة الدائرية ، وعند إرسال مصدر جهد المحرك إلى لوحة تشغيل المحرك ، قد ينخفض جهد المحرك بسرعة إذا كانت السعة المحلية غير كافية ، وقد يتم تنشيط الفتحة LC وظهور ذروة الاهتزاز. لتقليل ذروة التذبذب الناتجة عن اهتزاز LC في خط الطاقة ، يمكن وضع سعة جانبية (عادة ما تستخدم سعات السيراميك) بحجم 0.1 ميكروفاراد بالقرب من دبوس الطاقة لرقاقة تشغيل H-bridge.

مثال للرجوع إليه:

![](https://img.wiki-power.com/d/wiki-media/img/20211222150738.png)

علاوة على ذلك ، يمكن إضافة حلقات مغناطيسية على خط المحرك لتقليل التداخل المشترك (تم اختبارها بشكل واضح).

## المراجع والشكر

- [4 N-MOS تشكل دائرة تحكم كاملة](https://www.fanyedu.com/content/90.html)
- [شرح تصميم محرك كهربائي بفرشاة في مسابقة ROBOCON](https://zhuanlan.zhihu.com/p/27547384)
- [نقاش سطحي حول دوائر تحكم محركات كهربائية بفرشاة مباشرة](https://haipeng.me/2021/02/28/h-bridge-driver/)
- [أوضاع التحلل البطيئة والمختلطة والسريعة. لماذا نحتاج إلى تعقيد الأمور؟](https://ebldc.com/?p=86)
- [إتقان تدفق التيار وأوضاع التحلل والفرملة في تحكم المحركات الكهربائية](https://www.ti.com.cn/cn/lit/an/zhcaa31/zhcaa31.pdf)
- [تدفق التيار وأوضاع التحلل](https://www.ti.com/lit/an/slva321a/slva321a.pdf)

> عنوان النص: <https://wiki-power.com/>  
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.