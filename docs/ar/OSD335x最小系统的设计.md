# تصميم أصغر نظام OSD335x

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211012144907.png)

يتكون شريحة OSD335x-SM من TI من معالج Cortex-A8 AM335x وذاكرة DDR3 ومشغل طاقة TPS65217C PMIC ومنظم الجهد TL5209 LDO والمكونات السلبية المطلوبة وذاكرة EEPROM بسعة 4 كيلوبايت مدمجة في وحدة SIP (System-in-Package) داخل حزمة BGA.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211012153036.png)

يتكون النظام الأصغر لـ OSD335x من 4 أجزاء: الطاقة والساعة وإعادة التعيين وواجهة التصحيح والتنزيل. ولجعلها أسهل في الاستخدام ، يمكن إضافة زوج من الأزرار وبعض الصمامات وبعض دبابيس الأجهزة الخارجية.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211012155857.png)

## الطاقة

### المدخلات

- VIN_AC: مدخل الطاقة الرئيسي (DC5V @ 2A) ، يمكن إضافة مآخذ تأمين وحبل مغناطيسي وثنائيات صمام وحماية المدخل.
- VIN_USB: مدخل الطاقة USB (DC5V @ 0.5A ، يمكن زيادته إلى 1.3A عن طريق PMIC الداخلي) ، كما يستخدم كجهد وتيار مرجعي لمضيف USB 2.0.
- VIN_BAT: يمكن استخدامه كمدخل للبطارية (باستخدام مصدر طاقة البطارية ، 2.75-5.5 فولت) أو كمخرج (لشحن البطارية) ، ولا يمكن استخدامه كمدخل للأحداث.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211012173057.png)

### المخرجات

- SYS_VOUT: يساوي جهد PMIC الإدخال ، يجب ملاحظة أن المكونات الموصلة بالمدخل الموصل بهذا الدبوس يجب أن تعمل في نطاق 3-5 فولت ، لأن PMIC يقوم بتبديل مدخلات الطاقة المختلفة عند شحن البطارية.
- SYS_VDD1_3P3V: مخرج 3.3 فولت ، يتم توفيره بواسطة TL5209 LDO ويتم تمكينه بواسطة LDO4 في PMIC ، كمخرج للطاقة الرئيسية.
- SYS_VDD2_3P3V: مخرج 3.3 فولت ، يتم توفيره بواسطة LDO2 في PMIC.
- SYS_RTC_1P8V: مخرج 1.8 فولت ، يتم توفيره بواسطة LDO1 في PMIC ، ويستخدم أيضًا لتشغيل RTC الداخلي في AM335x.
- SYS_VDD_1P8V: مخرج 1.8 فولت ، يتم توفيره بواسطة LDO3 في PMIC.
- SYS_ADC_1P8V: مخرج 1.8 فولت ، يتم توفيره بواسطة LDO3 في PMIC ، ويتم تصفية التطبيقات التناظرية ، ويتم توفير الطاقة الكهربائية لـ AM335x ADC أيضًا.

يوصى بإضافة نقاط اختبار لجميع مخرجات الطاقة لتسهيل عملية التصحيح.

هناك أيضًا بعض دبابيس التي توفر الطاقة الداخلية: VDDSHV_3P3V و VDDS_DDR و VDD_MPU و VDD_CORE و VDDS_PLL. إنها مخصصة فقط للقياسات الخارجية ، ولا ينبغي استخدامها للدوائر الخارجية.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013142917.png)

### مدخلات المرجع الأرضية التناظرية

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013143532.png)

يحتوي OSD335x على واجهة ADC ، وإذا كنت تريد استخدام ADC ، فيجب استخدام مصدر طاقة تناظري وأرضي تناظري صحيحين. يمكن لواجهة ADC تحمل إشارة تناظرية بحد أقصى 1.8 فولت (بالإشارة إلى دبوس VREFP). عادةً ما يمكن توصيل VREFP مباشرة بـ SYS_ADC_1P8V ، ولكن إذا كان هناك حاجة ، فيمكن تقسيمه إلى جهد أقل.

### إدارة الطاقة

في الداخل ، يتم التواصل بين AM335x و TPS65217C PMIC عبر I2C0.

يحتوي I2C0 على مقاومات سحب 4.7 كيلو أوم ، ولكن إذا كنت تريد استخدام الجهاز ، فمن الأفضل إضافة مقاومات سحب إضافية في الخارج.

يمكن تعيين المعلمات التالية لـ TPS65217C PMIC عبر I2C:

- جهد شحن البطارية
- التحكم في وقت الشحن الآمن
- جهد الإخراج Buck / Boost
- جهد الإخراج LDO
- توقيت التشغيل / الإيقاف
- عتبة التيار الزائد / الحرارة

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013161739.png)

بالإضافة إلى الاتصال عبر I2C ، يتطلب PMIC بعض دبابيس الوظائف التي يجب توصيلها بـ OSD335x:

- PMIC_POWER_EN: يستخدم لتحكم AM335x في توقيت تشغيل PMIC
- PMIC_IN_PWR_EN: يمكّن buck و LDO في PMIC، ويبدأ التحكم في توقيت التشغيل عندما يتم توفير جهد عالٍ
- RTC_PWRONRSTN: دبوس إعادة تعيين الطاقة المستقل لـ AM335x RTC
- PMIC_OUT_LDO_PGOOD: حالة إخراج LDO1 و LDO2، يتم توفير جهد عالٍ عندما يكون الإخراج جيدًا، ويعني الجهد المنخفض أن أي إخراج LDO غير طبيعي.
- EXT_WAKEUP: دبوس استيقاظ الحدث الخارجي
- PMIC_OUT_NWAKEUP: دبوس استيقاظ الحدث الخارجي لـ Host (صالح للجهد المنخفض)
- EXTINTN: دبوس إدخال المقاطعة الخارجية لـ AM335x
- PMIC_OUT_NINT: دبوس إخراج PMIC النهائي (صالح للجهد المنخفض)

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013161927.png)

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013163119.png)

### زر الطاقة

يحتوي TPS65217C PMIC داخليًا على مدخل إعادة تعيين فعال منخفض الجهد، يتم توصيله بـ OSD335x عبر دبوس PMIC_IN_PB_IN، ويمكن أيضًا توصيله بزر خارجي. يتم توفير 50 مللي ثانية من وقت الارتداد لهذا المدخل الداخلي، ويحتوي على مقاومة سحب داخلية. بالإضافة إلى ذلك، يحتوي هذا الزر على الوظائف التالية:

- عندما يتم الكشف عن انخفاض الجهد على PMIC_IN_PB_IN، سيقوم PMIC بإيقاظ النظام من وضع الإغلاق أو السكون.
- عندما يتم الاحتفاظ بمدخل PMIC_IN_PB_IN على الجهد المنخفض لأكثر من 8 ثوانٍ، سيتم إعادة تشغيل / إعادة تعيين PMIC.
- إذا تم الاحتفاظ بدبوس PMIC_IN_PB_IN على الجهد المنخفض لفترة طويلة، فسيستمر الجهاز في التبديل بين الحالة النشطة وحالة الإعادة التعيين كل 8 ثوانٍ.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211013165738.png)

### مؤشر الطاقة

نستخدم SYS_VDD2_3P3V (150mA) كإخراج لمؤشر الطاقة.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014092054.png)

## إعادة التعيين

يوجد لدى OSD335x عدة طرق لإعادة التعيين:

- إعادة التعيين الباردة (إعادة التعيين عند التشغيل): يتم تنفيذها عند تشغيل الجهاز وتشغيل مجال الطاقة.
- إعادة التعيين الساخنة
  - إعادة تعيين جزئي، لا يؤثر على المنطق العام
  - تستخدم لتقليل وقت استعادة إعادة التعيين

يوجد لدى OSD335x 3 مداخل إعادة تعيين (تحمل نفس الاسم مثل مداخل إعادة التعيين على AM335x):

- PWRONRSTN: إعادة تعيين باردة؛ يجب الاحتفاظ بها على الجهد المنخفض خلال فترة التشغيل وتشغيل مجال الطاقة حتى تستقر جميع خطوط إمداد الطاقة الداخلية؛ لا يمكن حجبها، باستثناء RTC، ويتأثر النظام بأكمله.
- WARMRSTN: إعادة تعيين ساخنة؛ بعض مسجلات PRCM (إدارة الطاقة وإعادة التعيين والساعة) ووحدات التحكم لا تتأثر بإعادة التعيين الساخنة.
- RTC_PWRONRSTN: مدخل إعادة تعيين الطاقة المستقل لوحدة RTC الخاصة، لا يتأثر بإعادة التعيين الباردة، ولا يؤثر على أجزاء الجهاز الأخرى.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014105556.png)

## الساعة

### OSC0 و OSC1

يوجد لدى OSD335x مدخلان للساعة:

- OSC0: مدخل الساعة عالي السرعة (الساعة الرئيسية)، يعمل بتردد 19.2 ميجاهرتز أو 24 ميجاهرتز (التوصية) أو 25 ميجاهرتز أو 26 ميجاهرتز. هذا المصدر الزمني يوفر مرجعًا لجميع الوظائف غير RTC. يحتوي مدخل الساعة OSC0 على دبوس OSC0_IN و OSC0_OUT و OSC0_GND.
- OSC1: مدخل الساعة منخفض السرعة، يعمل بتردد 32.768 كيلوهرتز، ويوفر الطاقة لوحدة RTC. يحتوي مدخل الساعة OSC1 على دبوس OSC1_IN و OSC1_OUT و OSC1_GND. يتم تعطيل مصدر الساعة هذا افتراضيًا، وهو ليس ضروريًا، وإذا لزم الأمر، يمكن استقبال إشارة RC الكريستال الداخلية بتردد 32 كيلوهرتز.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014095242.png)

في الشكل أعلاه، Rbias و Rd اختيارية. إذا لم يتم توفير تردد دقيق، يمكن استخدام Rbias للمعايرة المرنة، ويمكن عدم تضمينها في المخطط الأساسي أو ترك مساحة لها. ومع ذلك، إذا لم يكن هناك حاجة لـ Rd، يجب استخدام سلك بدلاً منه، وإلا فسيؤدي ذلك إلى انقطاع التيار.

في التصميم المرجعي، تم استخدام OSC0 مع كريستال 7A-24.000MAAJ-T بتردد 24 ميجاهرتز، ومكثف 18 بيكوفاراد ومقاومة 1 ميجا أوم كـ Rbias.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014101932.png)

يتم توفير RTC_KALDO_ENN بشكل افتراضي بسحب خارجي (مقاومة 10 كيلو أوم)، ويستخدم لتمكين LDO RTC الداخلي.

## واجهة التصحيح والتصحيح

## استخدام واجهة JTAG في التصميم المرجعي

في التصميم المرجعي، يتم استخدام واجهة JTAG.

https://octavosystems.com/octavosystems.com/wp-content/uploads/2017/07/JTAG.jpg

## الأجهزة الخارجية الأخرى

### تكوين الإقلاع

يمكن الاطلاع على جدول تكوين الإقلاع في فصل **SYSBOOT Configuration Pins** من [**AM335x Technical Reference Manual (TRM)**](http://www.ti.com/lit/pdf/spruh73).

في التصميم المرجعي، يتم الاتصال على النحو التالي:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014110132.png)

تم تكوين المعلمات التالية:

- تعيين تردد الساعة على 24 ميجاهرتز
- تعطيل إخراج CLKOUT1 عن طريق XDMA_EVENT_INTR0، حيث يتم استخدام هذا الدبوس فقط للمحاكاة باستخدام JTAG.
- تعيين ترتيب الإقلاع على SPI0 -> MMC0 -> USB0 -> UART0

### أزرار المستخدم والمصابيح الحمراء

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014110906.png)

### دبابيس الأجهزة الخارجية

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211014110947.png)

## المراجع والشكر

- [SO YOU WANT TO BUILD AN EMBEDDED LINUX SYSTEM?](https://jaycarlson.net/embedded-linux/#)
- [OSD335x-SM System-in-Package Smallest AM335x Module, Quickest Design](https://octavosystems.com/octavo_products/osd335x-sm/#Technical%20Documents)
- [OSD335x Reference Design Tutorial Series](https://octavosystems.com/app_notes/osd335x-design-tutorial/)

> عنوان النص: <https://wiki-power.com/>  
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.
