# مفاهيم أساسية حول ADC و DAC

في العالم الحقيقي ، تكون الإشارات الشائعة عادةً تمثل كميات تناظرية مثل درجة الحرارة والصوت والضغط الجوي وما إلى ذلك ، ولكن في معالجة الإشارات ونقلها ، يتم استخدام كميات رقمية بشكل أكبر لتقليل التداخل الضوضائي. لذلك ، غالبًا ما نقوم بتحويل الإشارات التناظرية في العالم الحقيقي إلى إشارات رقمية باستخدام ADC للحساب والنقل والتخزين ، ثم تحويلها مرة أخرى باستخدام DAC إلى إشارة تناظرية للعرض.

ومع ذلك ، يجب ملاحظة أن الكميات التناظرية في العالم الحقيقي مستمرة ، مما يعني أن لديها دقة لا نهائية ، ولكن بعد التحويل إلى كميات رقمية ، سيتم فقدان بعض الدقة ، وسيصبح الوقت والشدة قيمًا م diskret.

## مبدأ ADC الأساسي

يشير ADC (محول التناظري إلى رقمي) إلى محول التناظري / الرقمي ، الذي يمكنه تحويل إشارات التناظرية الحقيقية في العالم ، مثل درجة الحرارة والضغط والصوت أو الصور ، إلى شكل رقمي أسهل للتخزين والمعالجة والإرسال.

### عينة

نظرًا لأن الإشارة التناظرية المدخلة مستمرة ، وسيتم تحويل الإشارة الرقمية المراد إخراجها إلى قيم م diskret ، فلا يمكن إجراء سوى عينة لحظية ، ثم تحويل قيمة العينة إلى كمية رقمية مخرجة ، ثم يتم البدء من جديد في العينة التالية.

لتمثيل الإشارة التناظرية المدخلة $v_1$ بدقة ودون أخطاء ، يجب على الأقل تلبية نظرية العينة ، والتي تتطلب تردد العينة $f_s$ أكثر من ضعف مكون التردد الأعلى لإشارة الإدخال التناظرية $f_{i (max)}$ (عادة ما يتم اختيار 3-5 أضعاف ، ولكن الترددات العالية جدًا تتطلب سرعة عمل أسرع ، ويجب مراعاة التكلفة الشاملة):

$$
f_s≥2\cdot f_{i(max)}
$$

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220724180529.png)

بمجرد تلبية نظرية العينة ، يمكن استخدام مرشح تردد منخفض لاستعادة $v_1$ من $v_s$ . يجب أن يظل معامل نقل الجهد لمرشح التردد منخفضًا عند أقل من $f_{i(max)}$ ، وينخفض بسرعة إلى 0 قبل $f_s-f_{i(max)}$.

### الحفاظ

يمكن لدائرة الحفاظة السماح للإشارة بالبقاء لفترة من الوقت بعد العينة ، مما يتيح لـ ADC الوقت الكافي للتحويل. كلما زادت ترددات العينة وكثافة العينة ، زاد عدد قيم العينة ، وتقترب إشارة الإخراج من شكل الموجة للإشارة المدخلة. يتكون الشكل الأساسي لدائرة العينة والاحتفاظ على النحو التالي:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220723161306.png)

الخطوات الأساسية لدائرة العينة والاحتفاظ هي:

1. عندما يكون إشارة التحكم في العينة $v_L$ على مستوى عال ، يتم توصيل MOSFET $T$ ، ويتم شحن المكثف $C_H$ بواسطة $v_1$ عبر المقاومة $R_1$ و MOSFET $T$.
2. إذا تم اختيار $R_1 = R_F$ ، فبعد الشحن ، يصبح $v_0 = v_c = -v_1$.
3. عندما ينخفض إشارة التحكم في العينة $v_L$ إلى المستوى السابق ، يتم قطع MOSFET $T$ ، ولن يتغير الجهد على المكثف $C_H$ بشكل مفاجئ ، لذلك يمكن لـ $v_0$ البقاء لفترة من الوقت ، ويتم تسجيل نتيجة العينة.

### كمية

يجب أن تكون الكمية الرقمية التي تم الحصول عليها من العينة مضاعفة لوحدة القياس الأدنى المحددة ، ويشار إلى هذه العملية باسم الكمية ، ويشار إلى وحدة الكمية الأدنى المحددة باسم وحدة الكمية $\Delta$. يساوي حجم الكمية الأدنى المحددة الذي يمثله الرقم 1 في أقل بت مؤثر LSB للإشارة الرقمية $\Delta$.

نظرًا لأن الجهد التناظري مستمر ، فقد لا يمكن تقسيمه على النحو الذي يمكن تقسيمه على $\Delta$ ، وبالتالي يمكن أن يحدث خطأ في الكمية.

كلما كانت مستويات الكمية أدق ، كان الخطأ في الكمية أقل ، وكلما زاد عدد الأرقام الثنائية المستخدمة في الرمز الثنائي ، زادت تعقيدات الدائرة.

### الترميز

يتم تمثيل النتائج المكملة بواسطة الرمز الثنائي (أو أي نظام ترقيم آخر) ، ويشار إلى هذه العملية باسم الترميز.

## أنواع ADC الشائعة

### نوع المقارنة المتوازية (Flash)

يشار إلى ADC نوع المقارنة المتوازية (Flash) أيضًا باسم ADC المباشر ، حيث يمكنه تحويل الجهد التناظري المدخل مباشرةً إلى كمية رقمية مخرجة دون الحاجة إلى تحويل وسيط. يتكون من سلسلة من مقارنات الجهد ، حيث يقارن كل مقارن بين إشارة المدخلات والجهد المرجعي المقسم. يتم توصيل مخرجات المقارنة بدائرة الترميز لإنتاج إخراج ثنائي.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220723163931.png)

لا يتم تحديد ADC نوع المقارنة المتوازية فقط في النظرية ولكنه أيضًا أكثر فعالية في السرعة كتقنية ADC ، ويتم تحديده فقط بتأخير انتشار المقارن والبوابة. للأسف ، فإنه يعتبر المكون الأكثر كثافة لأي عدد معين من البتات المخرجة (عادةً ما يكون معظم إ

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220723211839.png)

المبدأ الأساسي لـ DAC هو تعيين كمية رقمية ، ومن خلال DAC يتم الحصول على جهد إخراج تماثلي مقابله. يتم مقارنة هذا الجهد التماثلي مع إشارة الجهد التماثلي المدخلة بدءًا من البت الأعلى بترتيب متسلسل ، وإذا لم تكن متساوية ، فسيتم ضبط الكمية الرقمية المأخوذة حتى يتساوى الجهد التماثلي للإشارتين ، وسيكون الكمية الرقمية المأخوذة في النهاية هي النتيجة المطلوبة للتحويل. يشبه هذا العملية استخدام الميزان لقياس وزن الأشياء في موضع معين ، حيث يتم إضافة أو استبدال الأوزان الصغيرة بعد إضافة الأوزان الكبيرة.

يتميز ADC من النوع التقريبي التدريجي بسرعة عالية واستهلاك طاقة منخفض ، ولديه ميزة تكلفة منخفضة في الدقة الأقل (12 بت) ؛ ولكن لديه عيب في معدل التحويل العادي وحجم الدائرة.

### نوع الاندماج المزدوج (V-T)

ADC من النوع الاندماج المزدوج هو ADC غير مباشر ، حيث يتم تحويل إشارة الجهد التماثلي المدخلة أولاً إلى إشارة عرض الوقت المتناسبة معها ، ثم يتم عد النبضات للساعة ذات التردد الثابت خلال هذا العرض الزمني ، وسيكون العدد هو الإشارة الرقمية المتناسبة مع الجهد التماثلي المدخل. لذلك ، يُشار إلى هذا النوع من ADC أيضًا باسم ADC من النوع الجهد - الوقت (V-T).

يتكون ADC من النوع الاندماج المزدوج من مكبر التكامل والمقارن والعداد والمنطق التحكمي ومصدر إشارة الساعة ، كما هو موضح في الشكل:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220723213208.png)

يتميز ADC من النوع الاندماج المزدوج بأدائه المستقر (بعد التكامل المزدوج ، يتم استبعاد اختلافات معلمات RC) وقدرته على مقاومة التشويش (التكامل لا يتأثر بالضوضاء بشكل كبير) ؛ ولكن لديه عيب في معدل التحويل البطيء (تعتمد دقة التحويل على وقت التكامل).

### نوع Σ-Δ

يختلف مبدأ ADC من نوع Σ-Δ للتحويل الكمي عن نوع ADC المتوازي والتدريجي المذكور أعلاه ، حيث لا يتم ترميز قيمة العينة المأخوذة بشكل مباشر ، ولكن يتم ترميز الفرق بين قيمتي العينة المتتاليتين (الزيادة). يتكون هذا النوع من ADC من مكبر الجهد الخطي ومحول الترميز الإخراجي بت 1 و DAC المدخل بت 1 ودائرة المجموعة. يتم معالجة الإشارة الرقمية المخرجة V0 من خلال محول الترميز وتحويلها إلى إشارة تماثلية VF ، ويتم ربطها بالدائرة المجموعة عن طريق التغذية السلبية ، ويتم طرحها من إشارة المدخل V1 للحصول على الفرق VD. يتم تكامل VD بواسطة المكبر ، ويتم إخراج الجهد VINT إلى محول الترميز ، ويتم ترميزه إلى كمية رقمية بت 1. نظرًا لاستخدام محول الترميز بت 1 ، فإن إشارة الإخراج V0 هي تدفق بيانات مكون من 0 و 1 في حالة العمل المستمر.

يتميز ADC من نوع Σ-Δ بقدرته على إجراء قياسات عالية الدقة بسهولة ؛ ولكن لديه عيب في معدل التحويل البطيء وحجم الدائرة الكبير.

### نوع الجهد - التردد (V-F)

ADC من نوع الجهد - التردد (V-F) هو ADC غير مباشر. يتكون أساسًا من محول V-F (المعروف أيضًا باسم مولد التذبذب المحكوم بالجهد VCO) وعداد ومجموعة تحكم بالبوابات لإشارة الساعة والسجلات والمؤقتات ذات الحالة الثابتة وما إلى ذلك ، كما هو موضح في الشكل:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220723233236.png)

المبدأ هو:

- تحويل إشارة الجهد التماثلي المدخلة إلى إشارة تردد مقابلة لها.
- عد النبضات للتردد في الوقت المحدد.
- يكون العدد متناسبًا مع قيمة الجهد المدخل.

## المعلمات الرئيسية لـ ADC

- **الدقة** : كمية تغيير الجهد التماثلي المدخل المطلوبة لتغيير كمية رقمية متجاورة ، ويتم تمثيلها عادة بعدد الأرقام الثنائية ، ويتم تمثيل الدقة بـ n يعني أنها 1/2^n من الحد الأقصى للمدى Fs.
- **خطأ الترميز** : الخطأ الذي يتسبب فيه عدد الأرقام المحدودة لـ ADC عند ترميز الإشارة التماثلية. يحتاج عدد الأرقام لـ ADC ليكون كبيرًا جدًا أو حتى لا ينتهي ، لذلك يوجد خطأ في ترميز ADC. الانحراف الأقصى بين منحنى خصائص التحويل الدرجي المتدرج لـ ADC ذي الدقة المحدودة ومنحنى خصائص التحويل الدرجي المتدرج لـ ADC ذي الدقة اللامحدودة هو خطأ الترميز.
- **معدل التحويل** : عدد مرات التحويل في الثانية.
- **نطاق التحويل** : أقصى جهد يمكن قياسه بواسطة ADC ، وعادة ما يكون مساويًا لجهد المرجع ، ويمكن أن يتسبب تجاوز هذا الجهد في تدمير ADC. يمكن التفكير في خفض جهد المرجع لزيادة الدقة عندما يكون الإشارة صغيرة ، وبعد تغيير جهد المرجع ، سيتغير القيمة المحولة المقابلة له ، وعند حساب الجهد الفعلي ، يجب أن يتم احتساب جهد المرجع ، لذلك يجب أن يكون جهد المرجع مستقر

DAC (محول الرقمي إلى التناظري) هو محول الرقمي إلى التناظري. يمكنه تحويل الكمية الرقمية إلى جهد أو تيار تناظري متناسب. على سبيل المثال ، قد ينتج الكمبيوتر إخراجًا رقميًا يتراوح من `00000000` إلى `11111111` ، ويحول DAC ذلك إلى جهد يتراوح من 0 إلى 10 فولت. يمكن تقسيم DAC بشكل أساسي إلى نوعين: نوع الجمع الحالي ونوع المقسم.

## أنواع DAC الشائعة

### شجرة التبديل

يعتبر DAC شجرة التبديل أبسط وأكثر فظاعة ، ويتكون من مقاومة مقسمة وشبكة تبديل شجرية:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220724172844.png)

تتحكم 3 إشارات مدخل $d_0،d_1،d_2$ في هذه الأبواب ، وبالتالي يمكن الحصول على:

$$
v_0=\frac{V_{REF}}{2^1} d_2+\frac{V_{REF}}{2^2} d_1+\frac{V_{REF}}{2^3} d_0
$$

$$
v_0=\frac{V_{REF}}{2^3} (d_2 2^2+d_1 2^1+d_0 2^0)
$$

علاوة على ذلك ، يمكن الحصول على الناتج لإدخال ثنائي النظام الثنائي n بت في DAC شجرة التبديل كما يلي:

$$
v_0=\frac{V_{REF}}{2^n} (d_{n-1} 2^{n-1}+d_{n-2} 2^{n-2}+...+d_1 2^1+d_0 2^0)
$$

يتميز DAC شجرة التبديل بأنه يتطلب مقاومة نوع واحد فقط ، وعندما لا يتم أخذ تيار في نهاية الإخراج ، فإن متطلبات توصيل الأبواب ليست عالية ؛ ولكن العيب هو أنه يتم استخدام الكثير من الأبواب.

### شبكة المقاومات الثقيلة

تشير الوزن إلى القيمة التي يمثلها كل 1 في عدد ثنائي متعدد الأرقام. على سبيل المثال ، يتمثل الوزن في عدد ثنائي متعدد الأرقام n بت $D_n=d_{n-1}d_{n-2}...d_1 d_0$ من الرقم الأكثر أهمية (MSB) إلى الرقم الأقل أهمية (LSB) بالترتيب $2^{n-1},2^{n-2}...2^1,2^0$.

يتكون DAC شبكة المقاومات الثقيلة (المنتمي إلى نوع الجهد) من شبكة مقاومات ثقيلة و 4 أبواب تحويل تناظرية ومكبر مجموعة واحد:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220724003300.png)

$S_0،S_1،S_2،S_3$ هي 4 أبواب إلكترونية ، وتتحكم فيها 4 إشارات $d_0،d_1،d_2،d_3$ ، وعندما يكون المدخل 1 ، يتم توصيل الأبواب بـ $V_{REF}$ ، وعندما يكون المدخل 0 ، يتم توصيل الأبواب بالأرض. لذلك ، عندما يكون $d_i=1$ ، يتدفق التيار $I_i$ عبر مكبر المجموعة ، وعندما يكون $d_i=0$ ، يكون التيار عبر المسار صفرًا. مكبر المجموعة هو مكبر ذو ردود فعل سلبية ، وعندما يكون الجهد على مدخل العكس $V_-$ أقل من الجهد على مدخل الموجب $V_+$ ، يكون الجهد على مخرج $v_0$ إيجابيًا ؛ عندما يكون $V_->V_+$ ، يكون $v_0$ سلبيًا. وعندما يكون $V_-$ أعلى قليلاً من $V_+$ ، يمكن الحصول على جهد إخراج سلبي كبير على $v_0$ . يتم إرجاع $v_0$ من خلال $R_F$ إلى $V_-$ ، مما يجعل $V_-$ ينخفض مرة أخرى إلى $V_+$ (0 فولت).

في حالة كون المكبر التشغيلي جهازًا مثاليًا (تيار المدخل = 0) ، يمكن الحصول على:

$$
v_O=-R_F i_{\sum}=-R_F (I_3+I_2+I_1+I_0)
$$

ونظرًا لأن $V_-\approx 0$ ، فإن التيار في كل مسار هو:

$$
I_3=\frac{V_{REF}}{2^0 R} d_3
$$

$$
I_2=\frac{V_{REF}}{2^1 R} d_2
$$

$$
I_1=\frac{V_{REF}}{2^2 R} d_1
$$

$$
I_0=\frac{V_{REF}}{2^3 R} d_0
$$

حيث يمكن أن تكون $d_n$ 0 أو 1. عند الاستبدال في المعادلة السابقة ، وعندما يكون $R_F=\frac{R}{2}$ ، يمكن الحصول على الجهد المخرج:

$$
v_O=-\frac{V_{REF}}{2^4}(d_3 2^3+d_2 2^2+d_1 2^1+d_0 2^0)
$$

علاوة على ذلك ، يمكن الحصول على الجهد المخرج لشبكة المقاومات الثقيلة DAC n بت عندما يكون $R_F=\frac{R}{2}$ كما يلي:

$$
v_O=-\frac{V_{REF}}{2^n}(d_{n-1} 2^{n-1}+d_{n-2} 2^{n-1}+...+d_{1} 2^{1}+d_{0} 2^{0})
$$

$$
v_O=-\frac{V_{REF}}{2^n}D_n
$$

لذلك، فإن الجهد التماثلي المولد يتناسب مع كمية الأرقام المدخلة $D_n$، ونطاق تغييره هو من 0 إلى $-\frac{2^n-1}{2^n}V_{REF}$. من ناحية أخرى، إذا كنت بحاجة إلى جهد مولد إيجابي، فيجب توفير $V_{REF}$ السلبي.

يتميز شبكة المقاومة الكهربائية لـ DAC بأنها بسيطة الهيكل، ولكن عيبها هو أن قيم مقاوماتها تختلف كثيرًا، ويمكن أن يؤدي ذلك في الواقع إلى فقدان دقة كبيرة. لتحسين الأداء، يمكن استخدام شبكة مقاومة كهربائية ثنائية القطب، ولكن لا يمكن حل المشكلة بشكل جذري.

### شبكة المقاومة الكهربائية بتوصيلة T العكسية

لتحسين مشكلة اختلاف قيم مقاومات شبكة المقاومة الكهربائية، يمكن استخدام شبكة المقاومة الكهربائية بتوصيلة T العكسية DAC، حيث تستخدم فقط مقاومتين بقيمة R و 2R (لذلك يُطلق عليها أيضًا R2R DAC)، وهي مفيدة للغاية في تحسين الدقة:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220724165753.png)

عندما تكون قيمة مقاومة الردود العكسية للمضخم المجمع R، يكون الجهد المولد:

$$
v_O=-Ri_{\sum}=-\frac{V_{REF}}{2^n}D_n
$$

يمكن ملاحظة أن تعليمات حساب شبكة المقاومة الكهربائية بتوصيلة T العكسية DAC مطابقة لتلك لشبكة المقاومة الكهربائية العادية.

### نوعية التيار الكهربائي

عند تحليل شبكة المقاومة الكهربائية وشبكة المقاومة الكهربائية بتوصيلة T العكسية، يتم التعامل مع المفاتيح التماثلية على أنها عناصر مثالية، ولكن في الواقع، فإنها تحتوي على مقاومة توصيل وفقدان جهد، وتختلف في التوافق، مما يؤدي إلى خطأ في التحويل وتأثير على الدقة. يمكن حل هذه المشكلة باستخدام نوعية التيار الكهربائي DAC، حيث يحتوي على مجموعة من مصادر التيار الثابتة، وحجم كل مصدر تيار ثابت هو نصف السابق، وهو متناسب مع الوزن الثنائي المقابل للمدخلات. باستخدام مصادر التيار الثابتة، يتم تحقيق حجم تيار الفرع لكل فرع بشكل مستقل من مقاومة التوصيل وفقدان الجهد في المفاتيح.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220724171436.png)

عندما يكون رقم المدخلات مساويًا لـ 1، يتم توصيل مصدر التيار الثابت بمدخل المضخم العامل؛ عندما يكون رمز المدخلات مساويًا لـ 0، يتم توصيل المفتاح بالأرض، وبالتالي يكون الجهد المولد:

$$
v_O=\frac{R_F V_{REF}}{2^n R_R}D_n
$$

## المعلمات الرئيسية لـ DAC

- **الدقة**: نسبة الجهد التماثلي الأدنى المولد (وهو الجهد المولد عندما يكون رقم المدخلات مساويًا لـ 1) إلى الجهد التماثلي الأقصى المولد (وهو الجهد المولد عندما يكون رقم المدخلات هو الأعلى، وكل رقم هو 1)، وعادة ما يتم تمثيلها بعدد الأرقام الثنائية المدخلة.
- **نطاق التحويل**: أقصى جهد يمكن لـ DAC توليده، وعادة ما يتم الإشارة إلى الجهد المرجعي أو مضاعفاته.
- **زمن البناء**: الوقت المستغرق من المدخلات الثنائية إلى الجهد التماثلي المولد.
- **الدقة في التحويل**: مشابهة لدقة ADC.

## المراجع والشكر

- [《ADC/DAC 应用设计宝典》](https://picture.iczhiku.com/resource/eetop/syIFpRpWgQqgOXnx.pdf)
- [数模转换与模数转换](https://www.cnblogs.com/redlightASl/p/15542623.html)
- [ADC and DAC (Analog to Digital And Digital to Analog Converters)](https://www.youtube.com/playlist?list=PLwjK_iyK4LLCnW-df-_53d-6yYrGb9zZc)
- [漫谈 DAC 原理](https://www.bilibili.com/read/cv4873472/)
- 《Analog Engineer’s Pocket Reference》
- 《数字电子技术（第六版）\_阎石》

> عنوان النص: <https://wiki-power.com/>  
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.
