# واجهة الاختبار وأساس TIC

في اختبار الشرائح الإلكترونية ، **TIC (Test Interface Controller ، وحدة تحكم واجهة الاختبار)** هي متحكم رئيسي في الحافلة ، وهي تتبع بروتوكول **Test Interface** في مواصفات **AMBA (Advanced Microcontroller Bus Architecture ، بنية الحافلة المتحكمة المتقدمة)**. AMBA هي معيار الاتصال الداخلي للمتحكمات المدمجة ، وتشمل ثلاثة بروتوكولات للحافلة:

- **AHB (the Advanced High-performance Bus ، الحافلة عالية الأداء)**
- **ASB (the Advanced System Bus ، الحافلة النظامية)**
- **APB (the Advanced Peripheral Bus ، الحافلة الطرفية المتقدمة)**

نظرًا لأن فلسفة AMBA تتمثل في اختبار وحدات النظام المعزولة ، فإن اختبار كل وحدة يعتمد فقط على واجهة الحافلة ، وبالتالي يتطلب طريقة اختبار لاختبار إدخالات ومخرجات الأجهزة الطرفية غير المتصلة بالحافلة.

![](https://img.wiki-power.com/d/wiki-media/img/202308262214877.png)

يمكن تحقيق هذه الطريقة باستخدام واجهة الاختبار. يستخدم نظام الاتصال هذا ثلاث خطوط بسيطة للتحكم في قراءة وكتابة Vector. في الوقت نفسه ، يستخدم **EBI (External Bus Interface ، واجهة الحافلة الخارجية)** كمسار بيانات لإدخال Vector الخارجي إلى الحافلة الداخلية.

## دبابيس واجهة الاختبار

![](https://img.wiki-power.com/d/wiki-media/img/202308262225257.png)

يتكون دبوس واجهة الاختبار من ثلاثة أجزاء:

- دبوس ساعة واحد **TCLK**
- ثلاثة دبابيس تحكم **TREQA** و **TREQB** و **TACK**
- حافلة اختبار 32 بت **TBUS [31: 0]**

في التكوين الأدنى ، تحتاج واجهة الاختبار فقط إلى TREQA و TACK كـ **دبابيس مخصصة** للتحكم في دخول وخروج وضع الاختبار. يمكن تحقيق الدبابيس الأخرى عن طريق إعادة استخدام دبابيس الجهاز.

**TREQA / TREQB (Test Bus Request ، طلب الحافلة الاختبارية)** هي إشارات **مدخلات**. خلال تشغيل النظام العادي ، يستخدم TREQA لطلب دخول وضع الاختبار ، مما يسمح بتحميل Vector. خلال عملية الاختبار ، يتم استخدام TREQA و TREQB معًا للإشارة إلى نوع Vector المستخدم في الدورة التالية.

**TACK (Test Bus Acknowledge ، تأكيد الحافلة الاختبارية)** هي إشارة **مخرجة** تستخدم لتمثيل حالة الحافلة وإشارة اكتمال عنصر الاختبار. عندما يكون TACK على مستوى منخفض ، فإن ذلك يعني أن Vector الحالي يحتاج إلى المزيد من الوقت حتى يتحول TACK إلى مستوى عالي. يتم قراءة إشارات التحكم الخارجية TREQA / TREQB فقط عندما يكون TACK على مستوى عالي.

**TCLK (Test Clock)** هي إشارة ساعة مدخلات. يتم توفير ساعة اختبار واجهة الاختبار من الخارج. عند التبديل بين الوضع العادي ووضع الاختبار ، يتطلب ساعة TCLK عدم وجود أي تشويش.

**TBUS [31: 0] (Test Bus)** هي حافلة اختبار ثنائية الاتجاه 32 بت. في وضع الإدخال ، يتم استخدامه لنقل عنوان Vector ومعلومات التحكم وعملية الكتابة. في وضع الإخراج ، يمكن استخدامه لتنفيذ عملية القراءة. عند الحاجة إلى تغيير حالة إدخال / إخراج TBUS ، يضمن بروتوكول الحافلة الاختبارية توفير دورة للتحويل.

عندما يعمل النظام بشكل طبيعي ، يتم التحكم في واجهة الاختبار بواسطة جدول الحقيقة الثلاثي للتحكم في الثلاثة دبابيس:

| TREQA | TREQB | TACK | الحالة                    |
| ----- | ----- | ---- | ------------------------ |
| 0     | 0     | 0    | تعمل بشكل طبيعي ، لم يتم الدخول في وضع الاختبار |
| 1     | 0     | 0    | طلب الدخول في وضع الاختبار         |
| 0     | 1     | 0    | محجوز لطلب المضيف الخارجي   |
| -     | -     | 1    | تم الدخول في وضع الاختبار           |

في البداية ، يكون TREQA على مستوى منخفض ، مما يشير إلى عدم دخول وضع الاختبار بعد. عندما يتم تعيين TREQA على مستوى عالٍ ، يتم طلب الدخول في وضع الاختبار. ثم ، عندما يتم إخراج TACK على مستوى عالٍ ، يشير ذلك إلى أن TIC يسمح بالدخول في وضع الاختبار. في هذه الحالة ، يصبح TCLK مصدر الساعة الداخلية. بمجرد الدخول في وضع الاختبار ، تكون قيم الثلاثة خطوط وحالة النظام المقابلة على النحو التالي:

| TREQA | TREQB | TACK | الحالة                              |
| ----- | ----- | ---- | --------------------------------- |
| -     | -     | 0    | العملية الحالية لم تكتمل بعد                  |
| 1     | 1     | 1    | متجه العنوان / التحكم / التوجيه |
| 1     | 0     | 1    | متجه الكتابة                 |
| 0     | 1     | 1    | متجه القراءة                  |
| 0     | 0     | 1    | الخروج من وضع الاختبار                      |

يمكن تعيين TREQB على مستوى عالٍ بعد ذلك لتحميل متجه العنوان. يمكن بعد ذلك القيام بعمليات القراءة / الكتابة. عند الحاجة إلى الخروج من وضع الاختبار ، يجب إدخال متجه العنوان أولاً للتأكد من أن جميع النقل الداخلي قد اكتمل. بعد ذلك ، يتم تعيين TREQA و TREQB على مستوى منخفض ، مما يشير إلى الخروج من وضع الاختبار. في النهاية ، يتم إخراج TACK على مستوى منخفض ، مما يشير إلى الخروج من وضع الاختبار.

## أنواع المتجهات

في واجهة الاختبار ، يوجد 5 أنواع من المتجهات:

- **متجه العنوان** : متجه يعلن العنوان
- **متجه الكتابة** : متجه الكتابة (0/1)
- **متجه القراءة** : متجه القراءة (L/H)
- **متجه التحكم** : متجه التحكم
- **متجه التوجيه** : متجه التوجيه

يتم تحديد تنشيط Address/Control/TurnAround Vector بناءً على قيم TREQA/TREQB المشتركة. يمكن الاستناد إلى القواعد التالية لتحديد نوع المتجه:

- يظهر متجه Address/Control/TurnAround Vector واحد فقط: فهو متجه العنوان.
- يظهر سلسلة متجهات متتالية من Address/Control/TurnAround Vector: باستثناء آخر واحد يكون متجه التحكم ، يكون كلها متجهات العنوان.
- بعد متجه القراءة الواحد / العديد: سيتم دائمًا اتباعه بمتجه التوجيه. (في ASB هو واحد ، في AHB يحتاج إلى اثنين)

بالإضافة إلى ذلك ، يتم دمج متجه الانفجار (Burst Vector) بين عدة متجهات كتابة / قراءة اختبارية (Write/Read Test Vector) معًا (لاحظ أنها نفس النوع من المتجهات معًا ، ليس مختلطة). يتم تطبيق عنوان واحد فقط ، مما يسرع عملية الاختبار. يمكن أن يكون هذا العنوان ثابتًا (جميع المتجهات تستخدم نفس العنوان الذي تم إدخاله في البداية) أو يمكن أن يكون عنوانًا متزايدًا (يعتمد على ما إذا كان TIC يستخدم مضاعف العنوان المفعل). في حالة عدم وجود مضاعف العنوان ، سيتم استخدام العنوان الثابت بشكل افتراضي.

قبل أي عملية Read/Write ، يجب تمرير Vector العنوان أولاً. يتبع القواعد التالية:

- يجب تعيين TREQA/TREQB على 1 للإشارة إلى أن الدورة التالية هي Vector العنوان.
- في الدورة التالية ، يتم تحميل العنوان على TBUS[31:0]. في هذه النقطة ، سيحدد قيم TREQA/TREQB حالة الدورة التالية.

في بعض أنظمة الإشارات السريعة ، قد يتعين تحميل عدة Vector العنوان على التوالي (بزيادة الوقت الكافي لنقل العنوان من الخارج إلى حافلة العنوان الداخلية). في هذه الحالة ، سيقوم TIC بإجبار تحميل دورة Vector العنوان الثانية عندما يكون TACK الخاص بدورة Vector العنوان الأول 0.

### Vector التحكم

سيتم دائمًا تحميل Vector التحكم بعد Vector العنوان الفردي أو المتتالي ، ويستخدم لتحديث معلومات التحكم الداخلية لـ TIC. يتبع القواعد التالية:

- يجب تعيين TREQA/TREQB على 1 للإشارة إلى أن الدورة التالية هي Vector العنوان.
- في الدورة التالية ، يتم تحميل العنوان على TBUS[31:0]. في هذه النقطة ، سيظل TREQA/TREQB على 1 ، وسيظهر Vector التحكم في الدورة التالية.
- في الدورة التالية ، سيتم تحميل معلومات التحكم على TBUS[31:0]. في هذه النقطة ، سيحدد قيم TREQA/TREQB حالة الدورة التالية.

إذا كان من الضروري تعيين Vector التحكم غير الصالح ، فيمكن تعيين البت 0 على 0 ، وبالتالي يمكن الاحتفاظ بمعلومات Vector التحكم ولكن لا يتم تطبيقها.

### Vector الكتابة على الاختبار

بعد دخول وضع الاختبار بنجاح وتحديد العنوان ، يمكن القيام بعمليات الكتابة والقراءة. يتم تحديد العنوان المستخدم في عملية الكتابة بواسطة Vector العنوان السابق. يمكن أن يتبع Vector الكتابة على الاختبار أيًا من الـ Vector التالية:

- Vector العنوان الفردي.
- تسلسل Vector العنوان/التحكم.
- Vector الكتابة على الاختبار الآخر. يتكون من مجموعة Write Burst.
- Vector TurnAround بعد عملية القراءة المفردة/المتعددة.

عندما يكون حالة النقل بحاجة إلى تأخير ، سيتم تغيير TACK إلى مستوى منخفض. خلال هذه الفترة ، يجب تغيير TREQA/TREQB لتحديد نوع Vector التالي ، ولكن لا يجب القيام بعملية القراءة في هذا الوقت.

### Vector القراءة على الاختبار

مثل Vector الكتابة على الاختبار ، يتم تحديد العنوان المستخدم في عملية القراءة بواسطة Vector سابق ، ويمكن أن يتبع Vector القراءة على الاختبار أيًا من الـ Vector التالية:

- Vector العنوان الفردي.
- تسلسل Vector العنوان/التحكم.
- Vector القراءة على الاختبار الآخر. يتكون من مجموعة Read Burst.
- عملية الكتابة المفردة/المتعددة.

بعد عملية القراءة المفردة أو المتعددة ، يجب أن يكون هناك دائمًا Vector TurnAround لمنع تعارض إشارات TBUS الخارجية.

### Vector TurnAround

يمكن استخدام Vector TurnAround لتغيير اتجاه نقل TBUS عند التبديل بين عمليات الكتابة/القراءة. عندما يتحول القراءة إلى كتابة ، يتعين إدخال Vector TurnAround. لن يتم كتابة عنوان جديد في هذا العملية.

---

هذه بعض المعلومات الأساسية حول Test Interface و TIC. بالنسبة لتشغيل TIC على AHB بشكل محدد ، يرجى الرجوع إلى المقالة التالية [**AHB 上的 TIC**](https://wiki-power.com/ar/AHB%E4%B8%8A%E7%9A%84TIC) (قيد الكتابة ...) .

## المراجع والشكر

- _IHI0011 - ARM advanced microcontroller bus architecture (AMBA) specification.Rev 2.0_

> عنوان النص: <https://wiki-power.com/>  
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.