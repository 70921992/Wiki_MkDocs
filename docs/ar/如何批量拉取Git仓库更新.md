# كيفية جلب تحديثات مستودعات Git بشكل جماعي

عندما يكون لديك العديد من المستودعات ، يصبح الجلب يدويًا لكل منها مزعجًا. باستخدام الطريقة الموضحة في هذه المقالة ، يمكنك جلب المستودعات بشكل جماعي.

## الخطوات

1. قم بإنشاء ملف نصي جديد باسم `pull-master.sh` والصق الكود التالي فيه:

```shell title="pull-master.sh"
#!/bin/bash

function showMsg()
 {
   echo -e "\033[32m$1\033[0m"
 }

function getdir(){
    for element in `ls $1`
    do
        dir_or_file=$1"/"$element
        if [ -d $dir_or_file ]
        then
            cd $1"/"$element
            showMsg 'git pull '$element
            git pull
        else
            echo $dir_or_file
        fi
    done
}
root_dir="【مسار يحتوي على العديد من المستودعات】"
getdir $root_dir
```

2. استبدل `【مسار يحتوي على العديد من المستودعات】` بالمسار الخاص بك ، على سبيل المثال `C:\repos`.
3. قم بتشغيل الأمر:

```shell
sh pull-master.sh
أو
./pull-master.sh
```

أو قم بالنقر المزدوج على `pull-master.sh` لتشغيله.

## التنفيذ الدوري

1. ابحث وافتح `مجدول المهام`.
2. انقر فوق `إنشاء مهمة`.
   1. قم بإدخال الاسم في علامة التبويب `العامة`.
   2. قم بتعيين الفترة الزمنية في علامة التبويب `المشغل`.
   3. قم بإنشاء عملية جديدة في علامة التبويب `العمليات` ، وأدخل `البرنامج أو النص` (على سبيل المثال `F:\pull-master.sh`) ، وأضف المعلمات (على سبيل المثال `pull-master.sh`) ، وابدأ من (على سبيل المثال `F:\`).
3. قم بتشغيل الاختبار ، إذا لم يكن هناك مشكلة ، فقم بتشغيله. (إذا لم ينجح ، يمكن الرجوع إلى [**Pull-Git-Repo.xml**](https://github.com/linyuxuanlin/File-host/blob/main/software-development/Pull-Git-Repo.xml))

## النشر على NAS Synology

1. ضع البرنامج النصي (مثل `github-pull.sh`) في أي مسار على NAS.
2. قم بتعديل المسار الخاص بـ `root_dir` في `github-pull.sh` ، على سبيل المثال ، غيره إلى `"/volume1/projects"` ، وهو المكان الذي تضع فيه مستودعات Git.
3. `لوحة التحكم` - `مجدول المهام` - `جدولة مهمة` - `نص محدد من قبل المستخدم` ، في علامة التبويب `الجدولة` و `إعدادات المهمة` ، قم بتكوين وقت التشغيل الدوري وأمر تشغيل البرنامج النصي (على سبيل المثال `bash /volume1/stash/permanent/github-pull.sh`).
4. يمكن تكوين نتائج الإخراج في `الإعدادات` ، ثم اختيار المهمة والنقر فوق `تشغيل` للاختبار ويمكن فتح مسار الإخراج المكون لعرض نتائج التشغيل.

إذا كان من الضروري إدخال كلمة المرور في كل مرة ، يمكنك إدخال الأمر التالي (يجب تمكين دليل المستخدم مسبقًا):

```shell
git config –global credential.helper store
```

سيتم إنشاء ملف نصي محلي به معلومات الحساب وكلمة المرور.  
عندما يتم طلب كلمة المرور مرة أخرى ، يتم إدخالها مرة واحدة فقط ، ولن يتم طلبها مرة أخرى في المستقبل.

## المراجع والشكر

- [批量 git pull 小脚本](https://www.jianshu.com/p/42e8da5eb0af)
- [git 批量 pull_shell 脚本 -- 多个代码库批量 pull 最新 master 代码](https://blog.csdn.net/weixin_39618730/article/details/113024998)
- [Windows 定时执行 shell 脚本](https://blog.csdn.net/qq_40463753/article/details/84976977)

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.