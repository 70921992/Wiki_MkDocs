# مشروع تشغيل المحرك - IR2104S

تعتمد هذه الحلول على رقاقة تشغيل الجسر النصفي IR2104S وأنبوب N-MOS AP30H80K ، ويتم استخدام مثبت الجهد الخارجي XL2009E1 لتغذية IR2104S.

مستودع المشروع: [**Collection_of_Motor_Driver_Design/DC_Motor/IR2104S**](https://github.com/linyuxuanlin/Collection_of_Motor_Driver_Design/tree/main/DC_Motor/IR2104S)

معاينة المشروع عبر الإنترنت:

<div class="altium-iframe-viewer">
  <div
    class="altium-ecad-viewer"
    data-project-src="https://github.com/linyuxuanlin/Collection_of_Motor_Driver_Design/raw/main/DC_Motor/IR2104S/IR2104S.zip"
  ></div>
</div>

## المعلمات الأساسية

- المدخلات
  - **VM**: مدخل 12-36V لتغذية المحرك ، وفقًا لمعلمات XL2009E1 و IR2104S و AP30H80K.
  - **VCC_3V3**: مدخل 3.3-5V لجهد عمل نظام H-bridge الخارجي ، وفقًا لمعلمات رقاقة المنطق SN74LVC1G08DCKR.
  - **IN1 / IN2**: مدخلات منطقية خارجية ، يوصى بجهد مستوى عالي / منخفض يتبع VCC_3V3 ، ويمكن الرجوع إلى الجدول الحقيقي أدناه.
  - **PWM**: مدخل PWM ، يتم الحفاظ على جهد المستوى العالي / المنخفض مع جهد IN1 / IN2.
  - **SD**: افتراضيًا يتم سحبه داخليًا ، وهو فعال عندما يكون منخفضًا (يجعل رقاقة IR2104S النصفية تغلق) ، ويتم فتح IR2104S عندما يتم إدخال جهد عالي (جهد VCC_3V3).

- المخرجات
  - **M + / M-**: موصلات المحرك الخارجي.
  - **VCC_12V**: مخرج تثبيت الجهد على اللوحة ، كمخرج طاقة احتياطي.

عند استخدام وحدة تشغيل المحرك ، يجب توصيل نظام H-bridge إلى مرجع الجهد الخارجي.

يتم عرض جدول الحقيقة للتحكم في المنطق الخاص بالحلول هنا:

| SD  | IN1 | IN2 | PWM | حالة المحرك |
| --- | --- | --- | --- | -------- |
| 0   | x   | x   | x   | الانزلاق     |
| 1   | 1   | 0   | 1   | الدوران الإيجابي     |
| 1   | 0   | 1   | 1   | الدوران السلبي     |
| 1   | 1   | 1   | x   | الفرملة     |
| 1   | 0   | 0   | x   | الفرملة     |
| 1   | x   | x   | 0   | الفرملة     |

## المبادئ الأساسية

### الدوائر المنطقية

لتشغيل المحرك ، يتعين استخدام زوجين من دوائر الجسر النصفي لتشكيل دائرة الجسر الكامل. للتحكم في حالة المحرك وفقًا لجدول الحقيقة ، يتم استخدام دائرتين من بوابات الـ AND ، ويتم إجراء عملية AND بين إشارة PWM الخارجية و IN1 / IN2 ، ويتم إرسال النتيجة (PWMA / PWMB) إلى دبوس IN من IR2104. يتم توصيل مدخلات الطاقة لرقاقة المنطق بمكثف 100nF للتخلص من التداخل.

### الدوائر المثبتة للجهد

تعتمد دائرة التثبيت على رقاقة Buck XL2009E1 ، وظيفتها هي تثبيت الجهد الخارجي للطاقة الحركية الخارجية عند 12 فولت ، وتوفير الطاقة لرقاقة IR2104S (التي تتراوح قيمة التغذية الخاصة بها بين 10-20 فولت).

يمكن الرجوع إلى تصميم وحدة التثبيت في مقال [**مشروع الطاقة (Buck) - XL2009E1**](https://wiki-power.com/ar/%E7%94%B5%E6%BA%90%E6%96%B9%E6%A1%88%EF%BC%88Buck%EF%BC%89-XL2009E1) ، ولا يتم ذكره هنا.

### الدوائر المثبتة للجسر النصفي

يمكن الرجوع إلى المعرفة الأساسية لتشغيل المحرك في مقال [**تصميم تشغيل المحرك ذو الفرشاة المباشرة**](https://wiki-power.com/ar/%E7%9B%B4%E6%B5%81%E6%9C%89%E5%88%B7%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E7%9A%84%E8%AE%BE%E8%AE%A1) ، ولا يتم ذكره هنا.

IR2104S هي رقاقة تشغيل الجسر النصفي من Infineon. يتم عرض المعلمات الرئيسية لها هنا:

- تحمل جهد عالي يصل إلى +600 فولت للتشغيل الذاتي المعزول
- جهد تغذية بوابة 10-20 فولت
- متوافق مع مستويات الإدخال المنطقية 3.3 فولت / 5 فولت / 15 فولت
- ميزات أخرى:
  - قفل الجهد الأقل
  - التحكم في وقت المنطق الميت المتكامل
  - منع التداخل المتبادل للمنطق
  - المرحل العلوي متزامن مع إدخال المنطق
  - عند الإيقاف، يتم إيقاف الأنبوب العلوي والأنبوب السفلي
  - تأخير انتشار الأنبوب العلوي والأنبوب السفلي متطابق

الرسم البياني الداخلي:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220407155726.png)

مخطط التطبيق النموذجي:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220407155457.png)

في هذا الحل، يتم تغذية IR2104S بجهد 12 فولت مع توصيل مكثف إزالة الضوضاء 100 نانوفاراد. IN هو دبوس الإدخال المنطقي، ويعتبر أي إشارة تزيد عن 3 فولت عالية المستوى وأي إشارة تقل عن 0.8 فولت منخفضة المستوى. يمكن التحكم في فترات الإشارة العالية والمنخفضة PWMA / PWMB التي تم إخراجها من عملية رقاقة المنطق للتحكم في فتح وإغلاق الأنبوب العلوي والأنبوب السفلي. SD هو إدخال الإيقاف الخارجي (فعال في المستوى المنخفض). يتم خلط IN و SD الإدخالات، ويتم توصيلها بموجب الجهد والسالب لأنابيب البوابة العلوية والسفلية HO / LO كما هو موضح في الرسم البياني التوضيحي.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220407153203.png)

يمكن ملاحظة أنه إذا كان إدخال IN عالي المستوى، فإن أنبوب البوابة العلوي يتم فتحه بجهد عالي وأنبوب البوابة السفلي يتم إغلاقه بجهد منخفض، والعكس صحيح. إذا كان SD يكتشف مستوى منخفض، فإن الأنبوب العلوي والأنبوب السفلي سيتم إغلاقهما بغض النظر عن مستوى إدخال IN.

لمنع الانفجار العابر للأنبوب العلوي والأنبوب السفلي على نفس الجانب، يتم دمج IR2104S مع التحكم في فترة الموت. يتم عرض رسم توضيحي لتحكم في فترة الموت كما هو موضح في الرسم البياني التوضيحي.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220407153300.png)

حيث يكون القيمة النموذجية لـ DT هي 520 نانوثانية.

رسم توضيحي لتوقيت فتح / إغلاق الأنبوب العلوي والأنبوب السفلي:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220407153941.png)

حيث تكون القيمة النموذجية لـ $t_{on}$ هي 680 نانوثانية والقيمة النموذجية لـ $t_{off}$ هي 150 نانوثانية.

نظرًا لأن الأنابيب المستخدمة في هذا الحل هي N-MOS (شرط التوصيل هو $V_g-V_s>V_{gs(th)}$)، فإنه يتطلب وجود دائرة تشغيل عالية الجهد للأنبوب العلوي. يتم استخدام مكثف MLCC بسعة 1uF / 50V وتوصيله عبر VM و VB لجعل جهد HO أعلى من $V_{GS(th)}$ للأنبوب العلوي، وهو الفرق بين جهد تغذية IR2104S وانخفاض الجهد عبر الدايود، مما يسمح بتوصيل الأنبوب العلوي بشكل صحيح.

يجب مراعاة معايير اختيار المفاتيح MOS مثل $V_{DSS}$ و $V_{gs(th)}$ و $I_D$ و $R_{DS(on)}$ في التصميم. يتم تحديد $V_{DSS}$ بناءً على جهد المحرك بالإضافة إلى الحد الأدنى من الاحتياطي. يتم تحديد $I_D$ بناءً على متطلبات التطبيق بالإضافة إلى الحد الأدنى من الاحتياطي. كلما كان $R_{DS(on)}$ أقل كلما كان أفضل. بناءً على الاعتبارات المتكاملة للمعايير والأسعار، تم اختيار AP30H80K في هذا الحل.

تم تصميم وضع التحلل لأن IR2104S لا يحتوي على تحلل متزامن، لذلك تم اختيار ديود SS34 للتحلل غير المتزامن. 

## المراجع والشكر

- [تفاصيل دائرة تشغيل محرك H-bridge باستخدام STM32 و IR2104S](https://blog.csdn.net/qq_39400113/article/details/108909800)
- [تساؤلات حول مكثف التشغيل الذاتي في رقاقة تشغيل H-bridge للموسفيت](https://www.amobbs.com/thread-5716927-1-1.html)
- [دليل تصميم وتطبيق دائرة تشغيل ذاتية التشغيل لرقاقة تشغيل عالية الجهد AN-6076](http://file.elecfans.com/web1/M00/0E/2C/pIYBAFocSwiAd48MAA0ls-d5YeY046.pdf)
- [لماذا لا يمكن أن يكون PWM سريعًا جدًا عند تشغيل المحرك؟](https://blog.csdn.net/weixin_39883129/article/details/111642277)

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.