# Signal Integrity - Transmission Lines ðŸš§

Transmission lines are ideal components composed of any two wires of a certain length, known as the **signal path** and **return path (reference path)**. Transmission lines have two important characteristics: **characteristic impedance** and **delay**.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160107.png)

## Signal Transmission

To observe signal transmission, both the signal path and return path must be considered. How do we determine the signal path and return path? If the two wires are identical (such as twisted pair), there is no strict distinction; if it is a microstrip line, the plane is generally specified as the return path. It is important to note that in the context of signal integrity, we use the concept of "return path" instead of "ground" because the situations that need to be analyzed are far more complex than simply "ground".

After the signal enters the transmission line, it will propagate at the speed of light in the medium. We can represent the signal as the voltage difference between adjacent points on the signal path and return path:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221221001014.png)

If we assume a pair of sufficiently long and open-ended transmission lines, with current meters connected in series at the source end and end, and detect the signal current, we can observe that when the signal just enters the signal path, the current is already detected on the return path. Therefore, the current loop is not from the source end to the end and then back to the return path, but is generated by the potential difference between the signal and return path (similar to the charging of a capacitor). As the signal propagates, the location where current is generated also moves forward.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/currentonline.gif)

## Uniform Transmission Lines and Balanced Transmission Lines

To classify transmission lines, we can use two characteristics: the uniformity of the cross-section along the line and the similarity and symmetry of the two wires.

If the cross-section is the same at any position along the wire, it is called a **uniform transmission line**, also known as a **controlled impedance transmission line**, such as twisted pair, microstrip line, and strip line:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160253.png)

One goal of signal integrity design is to design all high-speed interconnects as uniform transmission lines and try to minimize the length of all non-uniform transmission lines.

Another characteristic is the similarity/symmetry of the two wires. If the two wires are exactly the same in shape and size, it is a **balanced transmission line**, such as twisted pair. An example of an unbalanced transmission line is a coaxial cable because the center conductor has a smaller cross-section than the outer layer.

## Signal Propagation Speed

The speed of signal propagation on a transmission line does not depend on the speed of electrons in the conductor.

If we know the number of electrons passing through the wire cross-section per second, the electron density in the wire, and the cross-sectional area of the wire, we can calculate the speed of electrons in the wire. Because the current in the conductor ($I$) can be calculated by the following formula:

$$
I=\frac{\Delta Q}{\Delta t}=\frac{qnAv\Delta t}{\Delta t}=qnAv
$$

where $\Delta Q$ represents the amount of charge flowing through the wire in $\Delta t$ (in coulombs), $q$ represents the charge carried by a free electron, which is a constant of $1.6\times 10^{-19}C$, $n$ represents the density of free electrons (in $\#/m^3$), and $A$ represents the cross-sectional area of the wire ($m^2$). Therefore, we can obtain the speed of electrons (in $m/s$):

$$
v=\frac{I}{qnA}
$$

In common media, the speed of electron motion is very low. For example, for a copper wire with a diameter of 1mm (the distance between copper atoms is about 1nm, and each copper atom can provide two free electrons, so the density of free electrons is about $10^{27}/m^3$), the speed of electrons at a current of 1A is about 1cm/s. Therefore, the **speed of electrons is much lower than the speed of signal propagation**.

Furthermore, reducing the resistance of interconnects does not necessarily increase the speed of signal propagation. Only in extremely extreme cases will the resistance of interconnects slightly affect the speed of signal propagation. In general, low wire resistance does not mean fast signal transmission speed.

The principle of signal transmission through electrons relies on the interaction between electrons.

One can imagine a wire as a long tube filled with marbles. If one pushes a marble at one end, another marble will be almost simultaneously pushed out at the other end. The speed at which the marbles transmit signals is much faster than their actual movement speed. Similarly, when electrons in a wire are pushed by neighboring electrons, the speed at which signals propagate does not depend on the electrons' own movement speed, but rather on the mutual entanglement between electrons.

When a signal is transmitted, an alternating electromagnetic field is generated in the conductor between the signal and return paths, as well as in the surrounding space. The factor that determines the speed of signal propagation is the establishment and propagation speed of the electromagnetic field.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160322.png)

The speed of electromagnetic field variation (field chain) can be calculated using the following formula:

$$
v=\frac{1}{\sqrt{\varepsilon_0\varepsilon_r\mu_0\mu_r}}
$$

where $\varepsilon_0$ represents the permittivity of free space, which is $8.89\times 10^{-12}F/m$; $\varepsilon_r$ represents the relative permittivity of the material, which is 1 in air; $\mu_0$ represents the permeability of free space, which is $4\pi\times10^{-7}H/m$; and $\mu_r$ represents the relative permeability of the material, which is almost always 1 for all interconnect media. Substituting the above constants yields:

$$
v=\frac{2.99\times 10^8}{\sqrt{\varepsilon_r}} m/s =\frac{12}{\sqrt{\varepsilon_r}}inch/ns
$$

Compared to air, the permittivity $\varepsilon_r$ of other materials is generally greater than 1, and the speed of light is approximately $12 inch/ns$. Therefore, the speed of light in interconnects is always less than $12 inch/ns$, and its actual speed is:

$$
v=\frac{12}{\sqrt{\mu_r}}inch/ns
$$

The relative permittivity is also commonly referred to as the permittivity, and the value for most polymers is 4. Generally, the permittivity decreases with increasing frequency, but the variation is relatively small in commonly used PCB materials. For example, the permittivity of FR4 fluctuates between 3.5 and 4.5, while that of high-speed materials fluctuates between 3 and 4. Using the formula, we can roughly estimate that the speed of signals in FR4 is about $6 inch/ns$ (without considering the electromagnetic field effect of air medium).

## Front-end space extension

The rise time (RT) of a signal usually represents the time length of the change from 10% to 90% of the maximum voltage. When a signal is transmitted on a transmission line, it pushes this edge forward, creating a space extension:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221221233250.png)

The length of this extension depends on the speed of the signal and the rise time:

$$
Len=RT\times v
$$

Assuming the signal speed is $6inch/ns$ and the rise time is 1 ns, the length of the front-end space extension is $6 inch$. The signal pushes forward on this 6-inch edge.

---

## Distributed capacitance of transmission lines

When there are multiple conductors, there is capacitance between each pair. For PCB traces, because of the long spatial structure, there is capacitance between each part of the trace conductor and the surrounding conductors, distributed over the entire length range of the trace. Therefore, the capacitance of the transmission line is distributed. When the signal advances, it can sense the presence of capacitance with each step.

In high-speed interconnect models, many phenomena such as impedance discontinuity, reflection, crosstalk, etc. are related to the distributed capacitance between conductors.

## Unit length capacitance

For PCB transmission lines with constant cross-sectional area, a lumped capacitance model can be used to represent the capacitance parameters using unit length capacitance. This way, the total capacitance is proportional to the length of the transmission line, which makes modeling easier.

> Lumped components: Refers to the collective term for components whose size is much smaller than the electromagnetic wave wavelength relative to the circuit operating frequency. For a signal, the characteristics of the component remain fixed at all times and are independent of frequency.

The prerequisite for using unit length capacitance to represent the capacitance effect of transmission lines is that there is no component of the electric field along the direction of the transmission line, that is, the propagation of the electromagnetic wave is approximately a uniform plane wave. PCB traces happen to meet this condition.

## Distributed inductance of transmission lines

Impedance discontinuity, reflection, crosstalk, ground bounce noise, etc. are also related to distributed inductance. Each part of the trace on the PCB has self-inductance, and there is mutual inductance between it and the surrounding conductors. The inductance is distributed over the entire length range of the trace, and the signal can sense the presence of inductance with each step.

## Loop inductance

Because the transmission line can treat the signal and return path as a whole, the signal current and return current exist simultaneously and form a complete current loop, and it is more convenient to use loop inductance analysis. The calculation formula for loop inductance is:

$$
L_{loop}=L_{Ss}+L_{Fs}-2L_{SFm}
$$

where $L_{SS}$ represents the self-inductance of the signal path, $L_{FS}$ represents the self-inductance of the return path, and $L_{SFm}$ represents the mutual inductance between the signal and return paths.

Treating the loop as a whole, the loop inductance describes the inductance characteristics of the loop itself, which is equivalent to the self-inductance of the loop itself.

## Unit Length Inductance

For convenience of modeling, the inductance of the transmission line can also be equivalent to multiple inductances in series. Divide the transmission line into many small segments of unit inductance (each segment includes signal and return paths), with a length of $\Delta Z$. The larger the $\Delta Z$, the larger the area formed by the signal and return paths in the region, and the larger the magnetic flux. Because the magnetic flux is linearly related to the area of the $\Delta Z$ region, it is also linearly related to $\Delta Z$. Therefore, as long as the unit length loop inductance is known, the loop inductance of any length can be obtained.

## Transient Impedance and Characteristic Impedance âˆš

According to the previous definition, we know that impedance refers to the ratio of voltage to current at a certain position on the transmission line. Because the transmission line is not necessarily uniform, the impedance that the signal encounters at each step may be different. This is called **instantaneous impedance**.

If the transmission line is uniform, then a impedance value can represent the impedance characteristics of the entire transmission line, and this impedance value is called the **characteristic impedance** of the transmission line, which can be expressed by unit length inductance and unit length capacitance:

$$
Z_0=\sqrt{\frac{L}{C}}
$$

The 50Î© impedance commonly used in PCB design refers to characteristic impedance. For FR4 substrate, when the line width is twice the thickness of the dielectric, the impedance of the microstrip line is 50Î©. When the transmission line spacing is the same, the higher the characteristic impedance, the more serious the crosstalk problem; and the lower the characteristic impedance, the more serious the power loss. Therefore, 50Î© is a relatively balanced value, and it is also used as a general standard later, but it does not mean that all interconnections must be 50Î©, and the impedance size can still be customized according to needs.

## Factors Affecting Characteristic Impedance âˆš

There are mainly four factors affecting characteristic impedance: **line width, dielectric thickness, dielectric constant, and copper foil thickness of the trace**.

The line width affects the characteristic impedance by affecting the unit length inductance and capacitance. For inductance, the wider the line width, the smaller the inductance, and the more the current is dispersed; conversely, the narrower the line width, the more the current is concentrated, and the larger the inductance. For capacitance, the wider the line width, the more the electric lines between the trace and the plane are concentrated in the dielectric area, and the larger the unit length capacitance (analogous to a parallel plate capacitor, the larger the area, the larger the capacitance); the narrower the line width, the smaller the capacitance. In summary, the wider the line width, the smaller the characteristic impedance.

Increasing the dielectric thickness will increase the distance between the two conductors, thereby reducing the mutual inductance and increasing the unit length inductance, which will increase the characteristic impedance of the transmission line.

The dielectric constant affects the characteristic impedance by affecting the unit length capacitance. When the dielectric constant increases, the capacitance increases, and the characteristic impedance decreases.

The thicker the copper foil, the smaller the inductance and the larger the capacitance, so the impedance is smaller.

## Driving and Internal Resistance of Transmission Lines

The driver can be equivalent to a voltage source of a high-speed switch plus internal resistance:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160639.png)

When open, the voltage applied to the transmission line is very close to the source voltage. The size of the internal resistance depends on the process of the device and is usually in the range of 5-60Î©. The internal resistance is connected in series to the circuit and can be equivalent to a voltage divider, which will produce a part of the voltage drop.

Therefore, in order to better drive the transmission line, the internal resistance of the driver should be as small as possible with the characteristic impedance of the transmission line. For example, if the characteristic impedance of the transmission line is 50Î©, the internal resistance should be less than 10Î©. If the internal resistance of the driver is very low, it is called a line driver, which can apply most of the voltage to the transmission line.

To calculate the internal resistance of the driver, the transmission line can be omitted, and the driver can be directly connected to an external resistor. The voltage at both ends of the resistor can be measured when a large and small resistor is connected, and the internal resistance can be calculated according to the equation.

## Return Path and Reference Plane

Current always flows in a loop, and there must be a return path for every path.

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160711.png)

According to the zero-order model of the transmission line, there are a series of small capacitors between the transmission line signal and the return path. The voltage is like a wave crest. Where the edge passes, the voltage changes, and the current flows through the capacitor to the return path.

Once a signal enters a transmission line, it propagates outward in the form of waves. Current flows in the loop formed by the signal path, line capacitance, and return path. The wavefront of this current loop propagates outward simultaneously with the voltage front. Therefore, the instantaneous impedance of the signal is the ratio of the signal voltage to the current.

If the return path is a plane (different from the trace layer), it is called a reference plane. For surface signal lines, only the adjacent inner layer planes can form a transmission line, so the surface trace has only one reference plane. For inner layer traces, there are two adjacent planes, so there are two reference planes. Any plane located in a different layer and overlapping with the signal trace can be used as a reference plane to form a transmission line.

The return current on the reference plane is not uniformly distributed throughout the entire plane, but has a skin effect and is concentrated near the trace. The return current on the reference plane of a microstrip line is equal in magnitude to the signal current. For a stripline, because there are two reference planes above and below, the return current is concentrated near the top and bottom of the signal line and is proportionally distributed according to the distance to the plane. The higher the signal frequency, the closer the current is squeezed.

## Transmission Line Delay ðŸš§

Signals take some time to travel from the source end to the end, resulting in a delay.

## First-Order Model of Ideal Transmission Line ðŸš§

Ideal transmission lines have two important characteristics: constant instantaneous impedance and corresponding delay. The first-order model abstracts each small section of the signal and return path wires as a loop inductance based on the zero-order model:

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221210160828.png)

When the capacitance and inductance are infinitely small, and the number of LC circuit sections tends to infinity, the unit length capacitance $C_L$ and unit length inductance $L_L$ tend to constants, which are the line parameters of the transmission line. If the total length of the transmission line is $Len$, then the total capacitance and inductance are:

$$
C_{total}=C_L*Len
$$

$$
L_{total}=L_L*Len
$$

Therefore, the characteristic impedance $Z_0$ and delay $T_D$ of the transmission line are:

$$
Z_0=\sqrt{\frac{L_L}{C_L}}
$$

$$
T_D=\sqrt{C_{total}*L_{total}}=Len*\sqrt{C_L*L_L}
$$

$$
v=\frac{Len}{T_D}=\frac{1}{\sqrt{C_L*L_L}}
$$

Since the characteristic impedance and delay of the transmission line must be consistent with the results of the zero-order model, some equations can be derived by associating them.

Because the signal velocity depends on the material's dielectric constant $\varepsilon_r$ (epsilon), which in turn depends on the unit length capacitance and inductance, the following equation is obtained:

$$
\because v=\frac{c}{\sqrt{\varepsilon_r}}=\frac{Len}{T_D}=\frac{1}{\sqrt{C_L*L_L}}
$$

## References and Acknowledgments

- "Signal Integrity and Power Integrity Analysis"
- "Unveiling Signal Integrity - Dr. Yu's SI Design Notes"

> This post is translated using ChatGPT, please [**feedback**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) if any omissions.
